# pandas

общий вид говна разобрали, теперь в частности

Первый вопрос - нахрен пандас, если есть НуМпаЕ, в котором уже все вроде бы готово? Ответ такой: потому что нумпае это работа с математикой больше, а пандас с конкретно данными в виде таблиц. Но при этом сам пандас где-то внутри использует нумпае для упаковки данных, но сверху оборачивает этой кучей всего, чтобы нам было удобно и комфортно работать с данными. Самый простой пример: в пандасе мы можем обращаться к заголовкам столбцов, а в нумпае пришлось бы ручками считать какой нам нужен по индексу.



В пандасе есть две структуры, на которых все строится: Series (столбец, не обращай внимание на "множественное число", это как species, одна и та же форма слова для единственного и для множественного) и DataFrame (таблица). Обрати внимание, что мы уже говорим на языке экселя (столбцы, таблицы), а не на языке математики (вектора, матрицы)

<figure><img src="../.gitbook/assets/1_dMNUhvp7N-6WV3i3QYz_fQ.webp" alt="" width="375"><figcaption></figcaption></figure>

В чем дополнительные плюшки:

1. Мы получаем удобную индексацию и возможность делать лейблы вместо чиселок (labels). Если в нумпае ты можешь обращаться только по индексу (порядковый номер строки и столбца в этой строке), то тут вместо индексов применяются лейблы, особенно для названия столбцов (Cars в таблице выше). Но также можно и для строк сделать, при этом можно делать чтобы было несколько таких индексов. Это как в таблице ниже: у нас есть два общих столбца, потом у каждого еще разделение и еще разделение. Данное чудо называется многоуровневое индексирование или multiIndex. Для строк аналогично работает. В общем и целом пандас просто пытается копировать логику работу с экселем.

<figure><img src="../.gitbook/assets/IJonr (1).png" alt="" width="563"><figcaption></figcaption></figure>

2. У нумпае в одном векторе должны быть значения с ОДНИМ типом данных. Пандас может с разными типами данных работать, поэтому мы об этом не думаем и можем иметь таблицу, где непонятно что происходит в плане данных.
3. В нумпае пустое значение значит, что ничего просто нет и длина вектора уменьшается на 1, в пандасе на пустое место встает NaN и мы можем не ломая структуру таблицы посмотреть наши данные и пропущенные значения
4. Ну и вишенка на торте это удобство работы, а в частности всякие группировки и прочая тьма (об этом позже).



Теперь к коду. Пандас также делает свои объекты series и dataFrame на основе питоновских, в частности списков.

```
new_series = pd.Series([20, 13, 4], name="table") вызываем метод Series() для создания столбца
                                                  name это имя столбца, оно не отображается
                                                  так как у нас один столбец, но есть

Мы можем захотеть получить данные:
new_series.values и так как это свойство, то мы не ставим скобки, просто берем значения

Можно отфильтровать:
new_series[new_series > 5] сначала он делает new_series > 5, получается Series из значений
                           True, True, False. После этого мы говорим взять из new_series
                           значения, которые True (то есть первое и второе).

Можно обращаться по индексу 
new_series[0] выведет 20

```

Более крутая штука это объект DataFrame или таблица.

